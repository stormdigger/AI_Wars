/* ══════════════════════════════════════════
   AI SQUAD – STYLE SYSTEM
   Mobile-first · Premium Design
   ══════════════════════════════════════════ */

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    --bg: #0a0a14;
    --surface: #13132a;
    --surface2: #1a1a35;
    --surface3: #232348;
    --border: #2e2e55;
    --accent: #7c6af7;
    --accent2: #e879a0;
    --text: #e0e0f0;
    --text2: #8888b0;

    /* Ludo colors */
    --ludo-red: #E53935;
    --ludo-green: #43A047;
    --ludo-blue: #1E88E5;
    --ludo-yellow: #FDD835;
    --ludo-white: #faf6ee;
    --ludo-bg: #f5efe0;

    --cell: min(6.2vw, 38px);
    --chess-cell: min(10.5vw, 60px);
}

body {
    font-family: 'Inter', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    min-height: 100dvh;
    padding: 8px;
    overflow-x: hidden;
}

/* ── APP SHELL ── */
.app-shell {
    max-width: 1640px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    height: calc(100vh - 16px);
    height: calc(100dvh - 16px);
}

/* ── TOP BAR ── */
.top-bar {
    background: linear-gradient(135deg, var(--surface), #1a1a38);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
    flex-wrap: wrap;
    box-shadow: 0 4px 20px rgba(0,0,0,.4);
}

.top-bar h1 {
    font-family: 'Rajdhani', sans-serif;
    font-size: 1.3em;
    letter-spacing: 1px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    white-space: nowrap;
}

.room-badge {
    background: var(--surface3);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 3px 12px;
    font-size: .73em;
    color: var(--text2);
    white-space: nowrap;
}

.tab-bar {
    margin-left: auto;
    display: flex;
    gap: 5px;
}

.tab-btn {
    padding: 7px 14px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--surface3);
    color: var(--text2);
    cursor: pointer;
    font-size: .8em;
    font-weight: 500;
    transition: all .2s;
    white-space: nowrap;
}

.tab-btn:hover { border-color: var(--accent); color: var(--accent); }
.tab-btn.active {
    background: var(--accent);
    color: #fff;
    border-color: var(--accent);
    box-shadow: 0 0 14px rgba(124,106,247,.4);
}

/* ── MAIN CONTENT ── */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 0;
    overflow: hidden;
}

/* ── CHAT PANEL ── */
.chat-panel {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-height: 0;
    flex: 1;
}

.setup-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 14px;
    padding: 30px 20px;
}

.setup-screen h2 {
    font-family: 'Rajdhani', sans-serif;
    font-size: 1.7em;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.setup-input {
    width: 100%;
    max-width: 260px;
    padding: 12px 16px;
    background: var(--surface3);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-size: .95em;
    outline: none;
    text-align: center;
    transition: border-color .2s;
}

.setup-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 12px rgba(124,106,247,.2);
}

.btn-primary {
    padding: 12px 30px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #fff;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: .95em;
    cursor: pointer;
    font-family: 'Rajdhani', sans-serif;
    letter-spacing: .5px;
    transition: all .2s;
    box-shadow: 0 4px 16px rgba(124,106,247,.3);
}

.btn-primary:hover { opacity: .9; transform: translateY(-2px); }

/* Chat messages */
.chat-msgs {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    scroll-behavior: smooth;
    min-height: 0;
}

.chat-msgs::-webkit-scrollbar { width: 3px; }
.chat-msgs::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.mw { display: flex; flex-direction: column; max-width: 88%; }
.mn { font-size: .68em; color: var(--text2); margin-bottom: 2px; font-weight: 500; }
.mb { padding: 8px 12px; border-radius: 12px; line-height: 1.5; font-size: .84em; word-wrap: break-word; }
.ms { align-self: center; color: var(--text2); font-size: .7em; padding: 3px 12px; background: var(--surface3); border-radius: 20px; font-style: italic; }

.mme { align-self: flex-end; }
.mme .mb { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: #fff; border-bottom-right-radius: 3px; }

.mot { align-self: flex-start; }
.mot .mb { background: var(--surface3); border-bottom-left-radius: 3px; }

.mgq { align-self: flex-start; }
.mgq .mb { background: linear-gradient(135deg, #142e22, #1a3a28); border: 1px solid #33cc7740; color: #99ffcc; border-bottom-left-radius: 3px; }

.mrt { align-self: flex-start; }
.mrt .mb { background: linear-gradient(135deg, #141a38, #1a2245); border: 1px solid #3377ff40; color: #aaccff; border-bottom-left-radius: 3px; }

.mgame { align-self: center; font-size: .7em; color: #ffbb33cc; background: var(--surface3); border: 1px solid var(--border); border-radius: 8px; padding: 3px 10px; max-width: 95%; }

.chat-inp-area {
    padding: 10px;
    background: var(--surface2);
    border-top: 1px solid var(--border);
    display: flex;
    gap: 6px;
    flex-shrink: 0;
}

.chat-inp-area input[type="text"] {
    flex: 1;
    padding: 10px 12px;
    background: var(--surface3);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-size: .84em;
    outline: none;
    min-width: 0;
}

.chat-inp-area input[type="text"]:focus { border-color: var(--accent); }

.bico {
    width: 40px; height: 40px;
    background: var(--surface3);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1em;
    transition: .15s;
    flex-shrink: 0;
}

.bico:hover { background: var(--border); }

.bsend {
    padding: 10px 16px;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    font-size: .82em;
    transition: .15s;
    flex-shrink: 0;
}

.bsend:hover { background: #6a5ae0; }

/* ── GAME AREA ── */
.game-area {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    display: none;
    flex-direction: column;
    overflow: hidden;
    min-height: 0;
    flex: 1;
    position: relative;
}

.game-area.active { display: flex; }

.gpane {
    display: none;
    flex: 1;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    overflow-y: auto;
    min-height: 0;
}

.gpane.vis { display: flex; }
.gpane::-webkit-scrollbar { width: 3px; }
.gpane::-webkit-scrollbar-thumb { background: var(--border); }

.pane-hdr {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    background: var(--surface2);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
    gap: 8px;
}

.pane-hdr h2 { font-family: 'Rajdhani', sans-serif; font-size: 1em; letter-spacing: .5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1; }

.pane-hdr .bnew { padding: 5px 12px; background: var(--surface3); border: 1px solid var(--border); border-radius: 8px; color: var(--text); cursor: pointer; font-size: .78em; font-weight: 500; transition: .15s; white-space: nowrap; flex-shrink: 0; }
.pane-hdr .bnew:hover { border-color: var(--accent); color: var(--accent); }

.btn-back { padding: 5px 12px; background: var(--surface3); border: 1px solid var(--border); border-radius: 8px; color: var(--text); cursor: pointer; font-size: .8em; font-weight: 500; transition: .15s; display: none; flex-shrink: 0; }
.btn-back:hover { border-color: var(--accent); color: var(--accent); }

.gpane-inner { padding: 12px; display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%; }

/* ── GAME START SCREEN ── */
.game-start-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; padding: 30px 20px; text-align: center; }

.game-start-screen .game-icon { font-size: 4em; filter: drop-shadow(0 0 20px rgba(124,106,247,.5)); animation: floatIcon 3s ease-in-out infinite; }

@keyframes floatIcon { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

.game-start-screen h2 { font-family: 'Rajdhani', sans-serif; font-size: 1.6em; color: var(--accent); }
.game-start-screen p { font-size: .85em; color: var(--text2); max-width: 300px; line-height: 1.5; }

.btn-start-game { padding: 14px 40px; background: linear-gradient(135deg, var(--accent), var(--accent2)); color: #fff; border: none; border-radius: 12px; font-weight: 700; font-size: 1.05em; cursor: pointer; font-family: 'Rajdhani', sans-serif; letter-spacing: 1px; transition: all .2s; box-shadow: 0 4px 20px rgba(124,106,247,.35); }
.btn-start-game:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 8px 30px rgba(124,106,247,.5); }

/* ══════════════════════════════════════
   PREMIUM LUDO BOARD – ARTISTIC STYLE
   ══════════════════════════════════════ */

#ludo-board {
    display: grid;
    grid-template-columns: repeat(15, var(--cell));
    grid-template-rows: repeat(15, var(--cell));
    gap: 0;
    background: var(--ludo-bg);
    border: 3px solid #c8a86b;
    border-radius: 12px;
    position: relative;
    box-shadow:
        0 10px 50px rgba(0,0,0,.6),
        0 0 0 1px #e8d8a8,
        inset 0 1px 0 rgba(255,255,255,.4);
    overflow: hidden;
}

/* Decorative outer glow on board */
#ludo-board::before {
    content: '';
    position: absolute;
    inset: -3px;
    background: linear-gradient(135deg, #E53935, #43A047, #1E88E5, #FDD835);
    border-radius: 14px;
    z-index: -1;
    opacity: 0.3;
    filter: blur(8px);
}

.lc {
    width: var(--cell);
    height: var(--cell);
    background: var(--ludo-white);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border: .5px solid #d8d0c0;
    transition: background .1s;
}

/* Home yards — rich gradient fills */
.lhr { background: linear-gradient(145deg, #EF5350, #E53935, #C62828) !important; border-color: #b71c1c !important; }
.lhg { background: linear-gradient(145deg, #66BB6A, #43A047, #2E7D32) !important; border-color: #1B5E20 !important; }
.lhb { background: linear-gradient(145deg, #42A5F5, #1E88E5, #1565C0) !important; border-color: #0D47A1 !important; }
.lhy { background: linear-gradient(145deg, #FFEE58, #FDD835, #F9A825) !important; border-color: #F57F17 !important; }

/* Token yard circles — white inset with color ring */
.lcircle {
    background: rgba(255,255,255,0.92) !important;
    border-radius: 50% !important;
    border: 2px solid rgba(255,255,255,0.6) !important;
    box-shadow: inset 0 2px 6px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.2);
}

/* Color-specific circle borders */
.lhr .lcircle, [data-token-color="red"].lcircle { border-color: rgba(198,40,40,0.5) !important; }
.lhg .lcircle, [data-token-color="green"].lcircle { border-color: rgba(46,125,50,0.5) !important; }
.lhb .lcircle, [data-token-color="blue"].lcircle { border-color: rgba(21,101,192,0.5) !important; }
.lhy .lcircle, [data-token-color="yellow"].lcircle { border-color: rgba(245,127,23,0.5) !important; }

/* Path cells */
.lpath { background: #fdf9f0 !important; border-color: #e0d8c8 !important; }

/* Colored paths */
.lpr { background: #ffcdd2 !important; border-color: #ef9a9a !important; }
.lpg { background: #c8e6c9 !important; border-color: #a5d6a7 !important; }
.lpb { background: #bbdefb !important; border-color: #90caf9 !important; }
.lpy { background: #fff9c4 !important; border-color: #fff176 !important; }

/* Home stretch lanes — vibrant solid */
.lsr { background: linear-gradient(145deg, #EF5350, #E53935) !important; border-color: #c62828 !important; }
.lsg { background: linear-gradient(145deg, #66BB6A, #43A047) !important; border-color: #2E7D32 !important; }
.lsb { background: linear-gradient(145deg, #42A5F5, #1E88E5) !important; border-color: #1565C0 !important; }
.lsy { background: linear-gradient(145deg, #FFEE58, #FDD835) !important; border-color: #F9A825 !important; }

/* Safe star */
.lsafe::after {
    content: '★';
    font-size: clamp(7px,2.2vw,13px);
    color: rgba(80,40,0,0.5);
    position: absolute;
    pointer-events: none;
    z-index: 1;
}

.lpr.lsafe::after { color: #c62828; opacity: 0.8; }
.lpg.lsafe::after { color: #2E7D32; opacity: 0.8; }
.lpb.lsafe::after { color: #1565C0; opacity: 0.8; }
.lpy.lsafe::after { color: #F57F17; opacity: 0.8; }

/* Entry arrow */
.lentry-arrow::before {
    content: '▶';
    font-size: clamp(5px,1.5vw,10px);
    color: rgba(0,0,0,0.4);
    position: absolute;
    pointer-events: none;
    z-index: 1;
}

/* Center — premium conic gradient with star */
.lcenter {
    background: conic-gradient(
        var(--ludo-red)    0deg 90deg,
        var(--ludo-green)  90deg 180deg,
        var(--ludo-blue)   180deg 270deg,
        var(--ludo-yellow) 270deg 360deg
    ) !important;
    border: 2px solid #c8a86b !important;
    position: relative;
    z-index: 2;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
}

.lcenter::after {
    content: '⭐';
    font-size: clamp(8px,2.2vw,14px);
    position: absolute;
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4));
}

/* ── PREMIUM TOKENS — FIXED POSITIONING via data-stack ── */
.tok {
    position: absolute;
    width: 46%;
    height: 46%;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(5px,1.3vw,8px);
    font-weight: 800;
    color: #fff;
    z-index: 10;
    pointer-events: none;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
    /* default position: center */
    left: 27%;
    top: 27%;
    transition: transform .3s ease;
}

/* Stack positions using data-stack attribute — 2×2 grid within cell */
.tok[data-stack="0"] { left: 4%;  top: 4%;  }
.tok[data-stack="1"] { left: 50%; top: 4%;  }
.tok[data-stack="2"] { left: 4%;  top: 50%; }
.tok[data-stack="3"] { left: 50%; top: 50%; }

/* Token colors with 3D radial gradient */
.tok-r {
    background: radial-gradient(circle at 35% 30%, #ff8a80, var(--ludo-red) 60%, #b71c1c);
    box-shadow: 0 3px 10px rgba(229,57,53,.65), inset 0 1px 3px rgba(255,255,255,.4);
}

.tok-g {
    background: radial-gradient(circle at 35% 30%, #a5d6a7, var(--ludo-green) 60%, #1B5E20);
    box-shadow: 0 3px 10px rgba(67,160,71,.65), inset 0 1px 3px rgba(255,255,255,.4);
}

.tok-b {
    background: radial-gradient(circle at 35% 30%, #90caf9, var(--ludo-blue) 60%, #0D47A1);
    box-shadow: 0 3px 10px rgba(30,136,229,.65), inset 0 1px 3px rgba(255,255,255,.4);
}

.tok-y {
    background: radial-gradient(circle at 35% 30%, #fff59d, var(--ludo-yellow) 60%, #F57F17);
    box-shadow: 0 3px 10px rgba(253,216,53,.65), inset 0 1px 3px rgba(255,255,255,.4);
    color: #5d4037;
    text-shadow: 0 1px 2px rgba(255,255,255,0.4);
}

/* Movable token — pulse animation, clickable */
.tok.mov {
    pointer-events: auto;
    cursor: pointer;
    border-color: #fff;
    z-index: 20;
    transform: scale(1.25) !important;
    filter: brightness(1.2) drop-shadow(0 0 4px rgba(255,255,255,0.8));
    animation: tpulse .5s infinite alternate;
}

/* Override stack positions for movable to maintain correct spot */
.tok[data-stack="0"].mov { left: 4%;  top: 4%; }
.tok[data-stack="1"].mov { left: 50%; top: 4%; }
.tok[data-stack="2"].mov { left: 4%;  top: 50%; }
.tok[data-stack="3"].mov { left: 50%; top: 50%; }

@keyframes tpulse {
    from { box-shadow: 0 0 0 0 rgba(255,255,255,.7), 0 3px 10px rgba(0,0,0,.3); }
    to   { box-shadow: 0 0 0 8px rgba(255,255,255,0), 0 3px 10px rgba(0,0,0,.3); }
}

/* Ludo controls */
.lctrl {
    display: flex;
    gap: 10px;
    align-items: center;
    background: linear-gradient(135deg, var(--surface2), #1e1e3a);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px 14px;
    width: 100%;
    justify-content: space-between;
    flex-wrap: wrap;
}

.dice-wrap { display: flex; align-items: center; gap: 10px; }

.dice {
    width: 54px; height: 54px;
    background: linear-gradient(145deg, #ffffff, #e8e0d0);
    border: 3px solid #c8a86b;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.9em;
    cursor: pointer;
    transition: all .2s;
    box-shadow: 0 4px 12px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.8);
    user-select: none; flex-shrink: 0;
    color: #333;
}

.dice:hover:not(.doff) { transform: scale(1.1); box-shadow: 0 6px 20px rgba(0,0,0,.4); }
.dice:active:not(.doff) { transform: scale(.9); }
.dice.doff { opacity: .3; cursor: not-allowed; box-shadow: none; }
.dice.dspin { animation: droll .45s ease; }

@keyframes droll {
    0%   { transform: rotate(0) scale(1); }
    25%  { transform: rotate(-30deg) scale(1.3); }
    50%  { transform: rotate(25deg) scale(.85); }
    75%  { transform: rotate(-10deg) scale(1.1); }
    100% { transform: rotate(0) scale(1); }
}

.tdots { display: flex; gap: 6px; align-items: center; margin-top: 3px; }

.tdot {
    width: 22px; height: 22px;
    border-radius: 50%;
    border: 2px solid transparent;
    transition: all .25s;
    cursor: default;
}

.tdot.act {
    border-color: #fff;
    box-shadow: 0 0 12px currentColor;
    transform: scale(1.2);
}

.lstat { font-size: .76em; color: var(--text2); text-align: right; max-width: 140px; line-height: 1.4; }

.llog {
    width: 100%; height: 55px;
    background: var(--surface3);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 6px 10px;
    font-size: .7em;
    overflow-y: auto;
    color: var(--text2);
    line-height: 1.6;
}

.llog::-webkit-scrollbar { width: 3px; }
.llog::-webkit-scrollbar-thumb { background: var(--border); }

.winner-ov {
    position: absolute; inset: 0;
    background: rgba(5,5,12,.94);
    display: none;
    flex-direction: column;
    align-items: center; justify-content: center;
    gap: 12px;
    border-radius: 10px;
    z-index: 100;
    backdrop-filter: blur(8px);
}

.winner-ov.show { display: flex; }

.wemoji { font-size: 3.5em; animation: wob 1s ease infinite alternate; }
@keyframes wob { from { transform: rotate(-10deg) scale(1); } to { transform: rotate(10deg) scale(1.15); } }

.wtext { font-family: 'Rajdhani', sans-serif; font-size: 1.8em; font-weight: 700; letter-spacing: 1.5px; text-shadow: 0 0 20px rgba(124,106,247,.5); }

/* ══════════════════════════════════════
   PREMIUM CHESS BOARD
   ══════════════════════════════════════ */

.chess-wrap { display: flex; gap: 16px; align-items: flex-start; justify-content: center; flex-wrap: wrap; padding: 12px; }
.chess-board-outer { display: flex; flex-direction: column; }
.chess-ranks-row { display: flex; }
.chess-rank-labels { display: flex; flex-direction: column; width: 18px; flex-shrink: 0; }
.chess-rank-labels span { height: var(--chess-cell); display: flex; align-items: center; font-size: .65em; color: var(--text2); font-weight: 600; }
.chess-file-labels { display: flex; padding-left: 18px; }
.chess-file-labels span { width: var(--chess-cell); text-align: center; font-size: .65em; color: var(--text2); font-weight: 600; }

#chess-board {
    display: grid;
    grid-template-columns: repeat(8, var(--chess-cell));
    grid-template-rows: repeat(8, var(--chess-cell));
    border: 3px solid #4a4a70;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 8px 40px rgba(0,0,0,.6), 0 0 60px rgba(124,106,247,.08);
}

.cc { width: var(--chess-cell); height: var(--chess-cell); display: flex; align-items: center; justify-content: center; font-size: clamp(1.3em,4.2vw,2.2em); cursor: pointer; position: relative; transition: all .15s; user-select: none; text-shadow: 0 2px 4px rgba(0,0,0,.6); }
.cc.lt { background: linear-gradient(145deg, #2e2e50, #282848); }
.cc.dk { background: linear-gradient(145deg, #161630, #121228); }
.cc.sel { background: rgba(124,106,247,.35) !important; box-shadow: inset 0 0 0 3px var(--accent); }
.cc.lm::after { content: ''; width: clamp(12px,3vw,20px); height: clamp(12px,3vw,20px); border-radius: 50%; background: rgba(124,106,247,.5); position: absolute; box-shadow: 0 0 8px rgba(124,106,247,.3); }
.cc.lc2 { background: rgba(255,68,102,.2) !important; box-shadow: inset 0 0 0 2px rgba(255,68,102,.4); }
.cc.chk { background: rgba(255,30,30,.35) !important; animation: chka .6s ease infinite alternate; }
@keyframes chka { from { box-shadow: inset 0 0 10px rgba(255,30,30,.2); } to { box-shadow: inset 0 0 20px rgba(255,30,30,.5); } }
.cc:hover { filter: brightness(1.2); }

.chess-side { display: flex; flex-direction: column; gap: 8px; min-width: 170px; max-width: 220px; }

.cbox { background: linear-gradient(135deg, var(--surface2), #1e1e3a); border: 1px solid var(--border); border-radius: 12px; padding: 10px; }
.cbox h3 { font-family: 'Rajdhani', sans-serif; font-size: .82em; color: var(--text2); margin-bottom: 6px; letter-spacing: .8px; text-transform: uppercase; }

.pslot { display: flex; align-items: center; gap: 8px; padding: 7px; border-radius: 8px; margin-bottom: 4px; background: var(--surface3); border: 1px solid transparent; transition: all .25s; }
.pslot.aturn { border-color: var(--accent); background: #1d1d38; box-shadow: 0 0 10px rgba(124,106,247,.15); }

.pdot { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; }
.pname { font-size: .8em; font-weight: 500; flex: 1; }
.pstat { font-size: .68em; color: var(--text2); }

.clog { height: 120px; overflow-y: auto; font-size: .7em; color: var(--text2); line-height: 1.7; }
.clog::-webkit-scrollbar { width: 3px; }
.clog::-webkit-scrollbar-thumb { background: var(--border); }

.cmove-row { display: flex; gap: 6px; }
.cmnum { color: var(--text2); min-width: 20px; }
.cmw { color: #ddd; min-width: 48px; }
.cmb { color: var(--text2); }

.cstatus { padding: 9px; background: var(--surface3); border-radius: 8px; font-size: .78em; color: var(--text); text-align: center; font-weight: 500; }
.ccap { display: flex; flex-wrap: wrap; gap: 1px; font-size: 1em; min-height: 24px; padding: 3px; background: var(--surface3); border-radius: 6px; }

.bact { width: 100%; padding: 8px; background: var(--surface3); border: 1px solid var(--border); border-radius: 8px; color: var(--text); cursor: pointer; font-size: .78em; font-weight: 500; transition: .15s; }
.bact:hover { border-color: var(--accent); color: var(--accent); }

.promo-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); background: var(--surface); border: 2px solid var(--accent); border-radius: 14px; padding: 18px; z-index: 200; display: none; gap: 10px; flex-direction: column; align-items: center; box-shadow: 0 20px 60px rgba(0,0,0,.9); }
.promo-modal.show { display: flex; }
.promo-title { font-family: 'Rajdhani', sans-serif; font-size: 1em; color: var(--text2); }
.promo-pieces { display: flex; gap: 8px; }
.pp { font-size: 2em; cursor: pointer; padding: 6px; border-radius: 8px; background: var(--surface3); border: 2px solid var(--border); transition: all .2s; }
.pp:hover { border-color: var(--accent); transform: scale(1.12); }

/* ══════════════════════════════════════
   SCRIBBLE GAME
   ══════════════════════════════════════ */

.scribble-layout {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    width: 100%;
    padding: 8px 10px 10px;
    flex: 1;
    /* No bottom padding needed — live chat is positioned within game area now */
}

/* Word choice overlay */
.scribble-word-pick { position: absolute; inset: 0; background: rgba(5,5,12,.95); display: none; flex-direction: column; align-items: center; justify-content: center; gap: 16px; z-index: 150; backdrop-filter: blur(6px); border-radius: inherit; }
.scribble-word-pick.show { display: flex; }
.scribble-word-pick h3 { font-family: 'Rajdhani', sans-serif; font-size: 1.3em; color: var(--accent); }

.word-options { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }

.word-opt { padding: 12px 24px; background: var(--surface3); border: 2px solid var(--border); border-radius: 12px; color: var(--text); font-size: 1em; font-weight: 600; cursor: pointer; transition: all .2s; font-family: 'Rajdhani', sans-serif; letter-spacing: .5px; }
.word-opt:hover { border-color: var(--accent); background: rgba(124,106,247,.15); transform: translateY(-3px); box-shadow: 0 6px 20px rgba(124,106,247,.3); }

/* Top bar */
.scribble-top { width: 100%; display: flex; align-items: center; gap: 8px; padding: 6px 8px; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; flex-shrink: 0; flex-wrap: wrap; justify-content: center; }

.scribble-timer-bar { flex: 1; min-width: 60px; height: 8px; background: var(--surface3); border-radius: 4px; overflow: hidden; }
.scribble-timer-fill { height: 100%; width: 100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); border-radius: 4px; transition: width .5s linear; }
.scribble-timer-fill.low { background: linear-gradient(90deg, #ff4444, #ff8800); animation: pulse-bar .5s infinite alternate; }
@keyframes pulse-bar { from { opacity: .7; } to { opacity: 1; } }

.scribble-time-txt { font-size: .82em; font-weight: 700; color: var(--accent); min-width: 34px; text-align: center; font-family: 'Rajdhani', sans-serif; }

.scribble-hint { font-family: 'Rajdhani', monospace; font-size: 1.15em; letter-spacing: 4px; color: var(--text); font-weight: 700; text-align: center; flex: 1; }

.scribble-round { font-size: .7em; color: var(--text2); white-space: nowrap; font-weight: 600; }

/* Canvas */
.scribble-canvas-wrap {
    width: 100%;
    max-width: 520px;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0,0,0,.4);
    border: 2px solid var(--border);
    background: #fff;
    touch-action: none;
    flex-shrink: 0;
}

.scribble-canvas-wrap canvas { display: block; cursor: crosshair; touch-action: none; width: 100%; }

/* Toolbar */
.scribble-toolbar { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; justify-content: center; padding: 6px 8px; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; width: 100%; max-width: 520px; flex-shrink: 0; }

.scolor-btn { width: 24px; height: 24px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; transition: all .15s; flex-shrink: 0; }
.scolor-btn:hover { transform: scale(1.15); }
.scolor-btn.active { border-color: #fff; transform: scale(1.2); box-shadow: 0 0 8px #fff5; }

.stool-sep { width: 1px; height: 22px; background: var(--border); margin: 0 3px; }

.ssize-btn { display: flex; align-items: center; justify-content: center; width: 28px; height: 28px; background: var(--surface3); border: 1px solid var(--border); border-radius: 6px; cursor: pointer; transition: .15s; }
.ssize-btn:hover { border-color: var(--accent); }
.ssize-btn.active { border-color: var(--accent); background: rgba(124,106,247,.2); }
.ssize-dot { border-radius: 50%; background: var(--text); }

.stool-btn { padding: 4px 8px; background: var(--surface3); border: 1px solid var(--border); border-radius: 6px; color: var(--text); cursor: pointer; font-size: .7em; font-weight: 500; transition: .15s; white-space: nowrap; }
.stool-btn:hover { border-color: var(--accent); color: var(--accent); }

/* Guess input row */
.scribble-guess-row { display: flex; gap: 8px; width: 100%; max-width: 520px; align-items: center; flex-shrink: 0; }
.scribble-guess-row input { flex: 1; padding: 9px 12px; background: var(--surface3); border: 1.5px solid var(--border); border-radius: 8px; color: var(--text); font-size: .88em; outline: none; transition: border-color .2s; }
.scribble-guess-row input:focus { border-color: var(--accent); }
.scribble-guess-row button { padding: 9px 20px; background: linear-gradient(135deg, var(--accent), var(--accent2)); border: none; border-radius: 8px; color: #fff; font-weight: 600; font-family: 'Rajdhani', sans-serif; font-size: .92em; cursor: pointer; letter-spacing: .5px; transition: transform .15s; flex-shrink: 0; }
.scribble-guess-row button:hover { transform: translateY(-1px); }

/* Scores — compact row */
.scribble-scores { display: flex; gap: 8px; width: 100%; max-width: 520px; justify-content: center; flex-shrink: 0; }

.sscore-card { display: flex; align-items: center; gap: 6px; padding: 5px 14px; background: var(--surface3); border: 1px solid var(--border); border-radius: 8px; font-size: .78em; flex: 1; justify-content: center; }
.sscore-card .ss-name { font-weight: 500; color: var(--text2); }
.sscore-card .ss-pts { font-weight: 700; color: var(--accent); font-family: 'Rajdhani', sans-serif; font-size: 1.2em; }
.sscore-card.ss-you { border-color: var(--accent); }
.sscore-card.ss-groq { border-color: #33cc77; }
.sscore-card.ss-router { border-color: #3377ff; }

/* Round result overlay */
.scribble-result { position: absolute; inset: 0; background: rgba(5,5,12,.95); display: none; flex-direction: column; align-items: center; justify-content: center; gap: 14px; z-index: 150; backdrop-filter: blur(6px); border-radius: inherit; }
.scribble-result.show { display: flex; }
.scribble-result h3 { font-family: 'Rajdhani', sans-serif; font-size: 1.3em; color: var(--accent); }
.scribble-result p { font-size: .9em; color: var(--text2); }

/* ══ LIVE CHAT OVERLAY — inside game area, at bottom ══
   Fixed: doesn't cover scribble scores because scribble
   layout uses flex column and scores come before the overlay */

.live-chat-overlay {
    /* In desktop: hidden — chat panel handles everything */
    display: none;
    flex-direction: column;
    flex-shrink: 0;
    background: rgba(10,10,20,.88);
    backdrop-filter: blur(8px);
    border-top: 1px solid rgba(255,255,255,.1);
    z-index: 50;
    padding: 5px 8px 6px;
    max-height: 150px;
}

.live-chat-msgs { flex: 1; overflow-y: auto; padding: 2px 4px; display: flex; flex-direction: column; gap: 1px; justify-content: flex-end; scrollbar-width: none; }
.live-chat-msgs::-webkit-scrollbar { display: none; }

.live-msg { padding: 2px 0; color: rgba(255,255,255,.78); font-size: .7em; line-height: 1.4; }
.live-name { font-weight: 600; margin-right: 4px; }
.live-name-user { color: var(--accent); }
.live-name-groq { color: #99ffcc; }
.live-name-router { color: #aaccff; }
.live-name-system { color: #ffcc00; font-style: italic; }

.live-chat-input { display: flex; gap: 5px; padding: 3px 0 0; }
.live-chat-input input { flex: 1; padding: 5px 8px; background: rgba(255,255,255,.07); border: 1px solid rgba(255,255,255,.12); border-radius: 6px; color: var(--text); font-size: .78em; outline: none; }
.live-chat-input input:focus { border-color: var(--accent); }
.live-chat-input button { padding: 5px 12px; background: var(--accent); border: none; border-radius: 6px; color: #fff; font-weight: 600; font-size: .75em; cursor: pointer; flex-shrink: 0; }

/* Clue area */
#scribble-clue-area { font-size: .8em; color: var(--text2); text-align: center; padding: 4px; background: var(--surface3); border-radius: 6px; width: 100%; max-width: 520px; }

/* ══ DESKTOP ══ */
@media (min-width: 800px) {
    body { padding: 16px; }

    .app-shell {
        display: grid;
        grid-template-columns: 380px 1fr;
        grid-template-rows: auto 1fr;
        gap: 14px;
        height: calc(100vh - 32px);
    }

    .top-bar { grid-column: 1 / -1; }

    .main-content {
        grid-column: 1 / -1;
        display: grid;
        grid-template-columns: 380px 1fr;
        gap: 14px;
    }

    .chat-panel { min-height: 0; }
    .game-area { display: flex !important; min-height: 0; }
    .btn-back { display: none !important; }
    .live-chat-overlay { display: none !important; }

    :root { --cell: 38px; --chess-cell: 60px; }
}

/* ══ MOBILE ══ */
@media (max-width: 799px) {
    .top-bar h1 { font-size: 1.1em; }

    .game-area.active {
        position: fixed;
        inset: 0;
        z-index: 1000;
        border-radius: 0;
        border: none;
        display: flex;
        flex-direction: column;
    }

    /* Live chat shown at bottom of game area on mobile */
    .game-area.active .live-chat-overlay {
        display: flex;
    }

    .btn-back { display: block; }

    .chess-side { min-width: 100%; max-width: 100%; }
    .chess-wrap { padding: 8px; gap: 10px; }
    .lctrl { padding: 8px 10px; gap: 6px; }
    .dice { width: 46px; height: 46px; font-size: 1.6em; }

    :root { --cell: min(6.2vw, 30px); --chess-cell: min(11.5vw, 50px); }

    /* Scribble on mobile — compact */
    .scribble-layout { padding: 6px 8px 6px; gap: 6px; }
    .scribble-canvas-wrap canvas { height: auto !important; }
}

@media (max-width: 400px) {
    :root { --cell: 5.8vw; --chess-cell: 10.5vw; }
    .top-bar { padding: 8px 10px; gap: 5px; }
    .tab-btn { padding: 5px 8px; font-size: .72em; }
    .pane-hdr h2 { font-size: .82em; }
}